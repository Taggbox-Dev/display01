"use strict";(self.webpackChunkcommerce_themes_update=self.webpackChunkcommerce_themes_update||[]).push([[934],{46934:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var r=a(1413),n=a(15671),o=a(43144),s=a(60136),i=a(48347),l=a(47313),c=(a(16231),a(17739)),d=a(70658),u=a(73763),p=(a(70816),a(2956),a(50175)),h=a(46417),m=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(){var t;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={isAuthorImageValid:!0},t.onCtaClick=function(e){var a=t.props,r=a.wall,n=a.item;(0,u.S5)({type:1,action:2,wall:r.Wall.id,feed:n.feedId,post:n.referenceId})},t}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var t=this.props.item,e=(0,c.uB)(t.author.picture);this.setState({isAuthorImagevalid:e})}},{key:"render",value:function(){var t,e=this.props,a=e.wall,r=e.item,n=e.network,o=(this.state.isAuthorImagevalid,a.Personalization.postTime),s=null!=(t=r.cta)&&""!==t&&0!==t,i=r.author.isInstaUser,l=a.Personalization.postAuthor,c=505==a.ThemeRule.iconType?n.color:a.ThemeRule.iconColor,u={backgroundImage:"url(".concat(r.author.picture,")")},m={backgroundColor:a.ThemeRule.authorColor},_={color:a.ThemeRule.authorColor},g=n.icon.replace("fa-","");return(0,h.jsxs)(h.Fragment,{children:[s?(0,h.jsxs)("span",{onClick:this.onCtaClick,children:[" ",(0,d.K)(r.cta)]}):null,(0,h.jsxs)("div",{className:"ts_cp_author_wrapper",children:[i?null:(0,h.jsxs)("div",{className:"ts_cp_author",children:[(0,h.jsx)("div",{className:"ts_cp_author_profile",style:u,children:(0,h.jsx)("img",{className:"ts_cp_author_profile_img",src:r.author.picture,onError:function(t){t.target.onerror=null,t.target.src=r.author.errorPic},alt:"image"})}),(0,h.jsxs)("div",{className:"ts_cp_author_info",children:[l?(0,h.jsx)("div",{className:"ts_cp_authorname",style:_,children:r.author.name}):"",(0,h.jsxs)("div",{className:"ts_cp_post_info",children:[l?(0,h.jsxs)("div",{className:"ts_cp_username",style:_,children:["@",r.author.username]}):"",o?(0,h.jsxs)(h.Fragment,{children:[l?(0,h.jsx)("div",{className:"ts_cp_seprator",style:m,children:(0,h.jsx)("div",{})}):"",o?(0,h.jsx)(p.Z,{postTime:r.createdAt,timeClass:"tb_sc_time",timeStyle:_}):""]}):""]})]})]}),(0,h.jsx)("div",{className:"ts_cp_social_",children:(0,h.jsx)("div",{className:"tb__icon tb-".concat(g),style:{color:c},children:(0,h.jsx)("div",{})})})]})]})}}]),a}(l.PureComponent),_=a(85942),g=a(57400),v=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(t){var r;return(0,n.Z)(this,a),(r=e.call(this,t)).state={height:"",padding:"",hideHotspot:!1,isImageloded:!1,error:""},r}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){(0,c.ll)(94);var t=this.props.ImageClass;document.querySelector(".".concat(t))&&document.querySelector(".".concat(t)).clientWidth>190?this.setState({hideHotspot:!1}):this.setState({hideHotspot:!0})}},{key:"componentWillMount",value:function(){var t=this,e=this.props.ImageUrl;(0,_.Z)(e).then((function(e){var a=e.width,r=e.height;return t.setState({height:100*r/a,width:100*a/r})})).catch((function(e){return t.setState({height:100,width:100,error:e})}))}},{key:"render",value:function(){var t=this,e=this.props,a=e.ImageClass,r=e.ImageUrl,n=e.item,o=e.ugc_products,s=e.wall,i=this.state,l=i.width,d=i.height,u=i.hideHotspot;return(0,h.jsxs)("div",{className:a,children:[(0,h.jsx)("img",{"data-src":r,src:r,"data-is-optmized":"0",style:{height:"100%",width:"100%"},"data-link":n.link,"data-load":"0","data-wall-id":s.Wall.id,"data-item-id":n.id,onLoad:this.onLoadImage,"data-filter-id":n.filterId,"data-stories":n.stories,"data-network":n.networkId,height:d,width:l,onError:function(t){(0,c.bO)(t)},alt:"image"}),!u&&n.hotspot&&n.ugc_products&&Object.keys(n.ugc_products).length>0?o.map((function(e,a){return(0,h.jsx)(g.Z,{customClass:"tb_post_hotspot_tooltip_",parentID:t.myRef,isIndex:a,product:e,item:n},a)})):""]})}}]),a}(l.PureComponent),f=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),e.apply(this,arguments)}return(0,o.Z)(a,[{key:"render",value:function(){var t=this.props,e=t.item,a=t.wall,r=(0,c.HS)(e.ugc_products);document.querySelector(".ts_p_".concat(e.id))&&document.querySelector(".ts_p_".concat(e.id)).clientWidth;return(0,h.jsx)("div",{className:"ts_cp_media_wrap",children:(0,h.jsx)(v,{ImageClass:"tb_sc_image",ImageUrl:e.postFileNew,ugc_products:r,item:e,wall:a})})}}]),a}(l.PureComponent),w=a(12268),D=a(42417),x=a(8354),j=a(1278),y=a(98501),I=a(7675),k=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(){var t;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).onLoadPopup=function(e){var a=t.props,r=a.itemData,n=a.wall,o=(a.appendData,a.postData),s=a.itemIndex,i=a.languageSetting,l=a.completeDataObject,d=a.wallId,p=a.webFilters,h=o.map((function(t){return l[t]})),m=h.filter((function(t){return!String(t.id).includes("free_add_")})),_=(0,c.E6)(m,r.id,s);1===n.Personalization.postFeatured&&((0,c.st)("add"),t.props.showPopUP({type:"post",card:r,idArray:m,index:_,viewOnText:i.viewOnText,shareText:i.shareText,personalization:n.Personalization,ThemeRule:n.ThemeRule,webFilters:p,UserRule:n.UserRule,wall:n})),(0,u.S5)({action:2,wall:d,feed:r.feedId,post:r.referenceId})},t}return(0,o.Z)(a,[{key:"render",value:function(){var t=this.props,e=t.itemData,a=(t.itemIndex,t.wall),r=t.webFilters,n=t.adjustWidth,o=e.highlight,s=a.ThemeRule.shareOption,i=(a.ThemeRule.hideContent,(0,c.EH)(e.networkId,r)),l={backgroundColor:a.ThemeRule.cardColor},d={width:1==o?2*n:n,padding:a.Personalization.padding/2},u=a.ThemeRule.socialAction,p={backgroundImage:"url(".concat(y.KA).concat(e.networkId,"/").concat(e.rating,".png)")},_=!!(e.ugc_products&&e.ugc_products.length>0&&0===e.hotspot),g=3===e.type||5===e.type;return(0,h.jsx)("div",{className:"ts_cp_post_wrapper ".concat(e&&e.id?"ts_p_"+e.id:""),style:d,children:(0,h.jsxs)("div",{className:"ts_cp_post_in tb__post_in",style:l,children:[(0,h.jsx)("div",{onClick:e.isPost?null:this.onLoadPopup,children:e.isPost?(0,h.jsx)(I.Z,{}):(0,h.jsxs)(h.Fragment,{children:[_||g?(0,h.jsx)(D.Z,{item:e,wall:a}):"",(0,h.jsx)(f,{item:e,wall:a}),(0,h.jsx)(m,{wall:a,item:e,network:i}),(0,h.jsx)("div",{className:"ts_cp_postContentCard_ratting",children:e.rating?(0,h.jsx)("div",{className:"tb_post_rating",style:p,children:(0,h.jsx)("div",{})}):""})]})}),!e.isPost&&s?(0,h.jsx)(w.Z,{item:e,wall:a,network:i}):null,"29"!==i.id&&u?(0,h.jsx)(j.Z,{item:e,wall:a,network:i}):null]})})}}]),a}(l.PureComponent),b=(0,x.$j)((function(t){return{wallId:t.appData.wallID}}),(function(t){return{showPopUP:function(e){return t((0,u.Bm)(e))}}}))(k),C=a(61395),Z=a.n(C),S=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(){var t;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).requestData=function(){var e=t.props,a=e.wall,r=(e.postData,e.appendData),n=e.hasMoreData,o=e.loaderData,s=a.ThemeRule.numberOfPosts,i=Math.floor(Date.now()/1e3);n&&!o.isShowMoreLoading&&t.props.getDataNextSteps(a.Wall.id,i,s,r.networkID,r.after,r.heightEvent)},t}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props,a=e.wall,r=(e.postData,e.appendData);e.hasMoreData,e.loaderData,document.getElementById("scrlBarComanW");new ResizeObserver((function(t){window.dispatchEvent(new Event("resize"))})).observe(document.querySelector(".taggshopContainer")),r&&a.Personalization.autoScrollStatus&&window.addEventListener("scroll",(function(e){var a=document.getElementById("scrlBarComanW"),r=(document.body.scrollHeight,window.innerHeight+window.scrollY);a.scrollHeight-10<r&&setTimeout((function(){return t.requestData()}),1e3)}))}},{key:"render",value:function(){var t=this,e=this.props,a=e.postData,n=e.completeDataObject,o=e.adjustWidth,s=e.wall;e.webFilters,e.languageSetting;return(0,h.jsx)("div",{className:"ts_cp_post_container",id:"ts_theme_container",children:(0,h.jsx)(Z(),{className:"ts_cp_post_container theme".concat(s.Personalization.commerceTheme),elementType:"div",options:{transitionDuration:0,percentPosition:!0,itemSelector:".ts_cp_post_wrapper",fitWidth:!1,columnWidth:0},disableImagesLoaded:!1,updateOnEachImageLoad:!1,imagesLoadedOptions:{},enableResizableChildren:!0,children:a&&a.length>0?a.map((function(e,s){c.j6&&a&&a.length-1==s&&setTimeout((function(){var t=document.querySelectorAll("img[data-is-optmized='0']");t&&t.length>0&&t.forEach((function(t){t.setAttribute("src",t.getAttribute("data-src")),t.setAttribute("data-is-optmized","1")}))}),1300);var i=n[e];return(0,h.jsx)(b,(0,r.Z)({itemData:i,itemIndex:s,adjustWidth:o},t.props),"post_id_".concat(s))})):null})})}}]),a}(l.PureComponent),P=(0,x.$j)((function(t){var e=t.appData;return{appData:e,loaderData:t.loaderData,postData:e.postData.postData,appendData:e.postData.appendData,hasMoreData:!e.postData.hasMoreData[0]||0!=e.postData.hasMoreData[0].hasMoreData&&(!e.postData.hasMoreData[e.postData.appendData.networkID]||e.postData.hasMoreData[e.postData.appendData.networkID].hasMoreData)}}),(function(t){return{getDataNextSteps:function(e,a,r,n,o,s,i){return t((0,u.Sx)(e,a,r,n,o,s,i))}}}))(S)}}]);